package components

import (
	"context"
	"law_flow_app_go/services/i18n"
)

templ LanguageSwitcher(ctx context.Context) {
	<div x-data="{ open: false }" class="relative">
		<button @click="open = !open" @click.outside="open = false" class="flex items-center space-x-2 text-gray-700 hover:text-primary-600 focus:outline-none transition border border-gray-200 rounded-lg px-3 py-1.5 bg-white shadow-sm">
			<span class="text-sm font-medium">
				if i18n.GetLocale(ctx) == "es" {
					ðŸ‡ªðŸ‡¸ ES
				} else {
					ðŸ‡ºðŸ‡¸ EN
				}
			</span>
			<svg class="h-4 w-4 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
				<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
			</svg>
		</button>
		
		<div 
			x-show="open" 
			x-transition:enter="transition ease-out duration-100"
			x-transition:enter-start="opacity-0 scale-95"
			x-transition:enter-end="opacity-100 scale-100"
			x-transition:leave="transition ease-in duration-75"
			x-transition:leave-start="opacity-100 scale-100"
			x-transition:leave-end="opacity-0 scale-95"
			class="absolute right-0 mt-2 w-32 bg-white rounded-lg shadow-lg border border-gray-100 py-1 z-50 origin-top-right focus:outline-none"
			style="display: none;"
		>
			<a href="?lang=en" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-primary-600 flex items-center justify-between group">
				<span class="flex items-center">
					<span class="mr-2">ðŸ‡ºðŸ‡¸</span> English
				</span>
				if i18n.GetLocale(ctx) == "en" {
					<svg class="h-4 w-4 text-primary-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
					</svg>
				}
			</a>
			<a href="?lang=es" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-primary-600 flex items-center justify-between group">
				<span class="flex items-center">
					<span class="mr-2">ðŸ‡ªðŸ‡¸</span> EspaÃ±ol
				</span>
				if i18n.GetLocale(ctx) == "es" {
					<svg class="h-4 w-4 text-primary-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
					</svg>
				}
			</a>
		</div>
	</div>
}
